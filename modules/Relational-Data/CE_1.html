---
layout: page
title: Exercise - Relational Data
author: Derek H. Ogle
css: "/css/modules.css"
---


<hr />
<div id="join-identification-i" class="section level2">
<h2>Join Identification I</h2>
<p>Suppose that you have two simple data frames <code>A</code> and <code>B</code>.</p>
<table class=" lightable-classic table table-hover table-condensed" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; float: left; margin-right: 10px;">
<caption>
Data frame A
</caption>
<thead>
<tr>
<th style="text-align:center;font-weight: bold;">
uniq
</th>
<th style="text-align:center;font-weight: bold;">
meas1
</th>
<th style="text-align:center;font-weight: bold;">
meas2
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
A13
</td>
<td style="text-align:center;">
34
</td>
<td style="text-align:center;">
sun
</td>
</tr>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
87
</td>
<td style="text-align:center;">
sun
</td>
</tr>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
65
</td>
<td style="text-align:center;">
moon
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
33
</td>
<td style="text-align:center;">
moon
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
sun
</td>
</tr>
</tbody>
</table>
<table class=" lightable-classic table table-hover table-condensed" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-right: 0; margin-left: auto">
<caption>
Data frame B
</caption>
<thead>
<tr>
<th style="text-align:center;font-weight: bold;">
uniq
</th>
<th style="text-align:center;font-weight: bold;">
meas3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
A14
</td>
<td style="text-align:center;">
am
</td>
</tr>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
pm
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
am
</td>
</tr>
<tr>
<td style="text-align:center;">
A17
</td>
<td style="text-align:center;">
pm
</td>
</tr>
</tbody>
</table>
<!-- for clearing the floats from above -->
<div style="clear:both;">

</div>
<p>What kind of join was applied to <code>A</code> and <code>B</code> to create each data frame below? [<em>Think deeply about your answers here but note that you will not be graded on your answers to these questions.</em>]</p>
<ol>
<li>
Data frame <code>Z</code>
</li>
<table class=" lightable-classic table table-hover table-condensed table-striped" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;">
uniq
</th>
<th style="text-align:center;font-weight: bold;">
meas1
</th>
<th style="text-align:center;font-weight: bold;">
meas2
</th>
<th style="text-align:center;font-weight: bold;">
meas3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
87
</td>
<td style="text-align:center;">
sun
</td>
<td style="text-align:center;">
pm
</td>
</tr>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
65
</td>
<td style="text-align:center;">
moon
</td>
<td style="text-align:center;">
pm
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
33
</td>
<td style="text-align:center;">
moon
</td>
<td style="text-align:center;">
am
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
sun
</td>
<td style="text-align:center;">
am
</td>
</tr>
</tbody>
</table>
<li>
Data frame <code>Y</code>
</li>
<table class=" lightable-classic table table-hover table-condensed table-striped" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;">
uniq
</th>
<th style="text-align:center;font-weight: bold;">
meas1
</th>
<th style="text-align:center;font-weight: bold;">
meas2
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
87
</td>
<td style="text-align:center;">
sun
</td>
</tr>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
65
</td>
<td style="text-align:center;">
moon
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
33
</td>
<td style="text-align:center;">
moon
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
sun
</td>
</tr>
</tbody>
</table>
<li>
Data frame <code>X</code>
</li>
<table class=" lightable-classic table table-hover table-condensed table-striped" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;">
uniq
</th>
<th style="text-align:center;font-weight: bold;">
meas1
</th>
<th style="text-align:center;font-weight: bold;">
meas2
</th>
<th style="text-align:center;font-weight: bold;">
meas3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
87
</td>
<td style="text-align:center;">
sun
</td>
<td style="text-align:center;">
pm
</td>
</tr>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
65
</td>
<td style="text-align:center;">
moon
</td>
<td style="text-align:center;">
pm
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
33
</td>
<td style="text-align:center;">
moon
</td>
<td style="text-align:center;">
am
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
sun
</td>
<td style="text-align:center;">
am
</td>
</tr>
<tr>
<td style="text-align:center;">
A14
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
am
</td>
</tr>
<tr>
<td style="text-align:center;">
A17
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
pm
</td>
</tr>
</tbody>
</table>
<li>
Data frame <code>W</code>
</li>
<table class=" lightable-classic table table-hover table-condensed table-striped" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;">
uniq
</th>
<th style="text-align:center;font-weight: bold;">
meas1
</th>
<th style="text-align:center;font-weight: bold;">
meas2
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
A13
</td>
<td style="text-align:center;">
34
</td>
<td style="text-align:center;">
sun
</td>
</tr>
</tbody>
</table>
<li>
Data frame <code>V</code>
</li>
<table class=" lightable-classic table table-hover table-condensed table-striped" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;">
uniq
</th>
<th style="text-align:center;font-weight: bold;">
meas1
</th>
<th style="text-align:center;font-weight: bold;">
meas2
</th>
<th style="text-align:center;font-weight: bold;">
meas3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
A13
</td>
<td style="text-align:center;">
34
</td>
<td style="text-align:center;">
sun
</td>
<td style="text-align:center;">
NA
</td>
</tr>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
87
</td>
<td style="text-align:center;">
sun
</td>
<td style="text-align:center;">
pm
</td>
</tr>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
65
</td>
<td style="text-align:center;">
moon
</td>
<td style="text-align:center;">
pm
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
33
</td>
<td style="text-align:center;">
moon
</td>
<td style="text-align:center;">
am
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
sun
</td>
<td style="text-align:center;">
am
</td>
</tr>
<tr>
<td style="text-align:center;">
A14
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
am
</td>
</tr>
<tr>
<td style="text-align:center;">
A17
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
pm
</td>
</tr>
</tbody>
</table>
<li>
Data frame <code>U</code>
</li>
<table class=" lightable-classic table table-hover table-condensed table-striped" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;">
uniq
</th>
<th style="text-align:center;font-weight: bold;">
meas1
</th>
<th style="text-align:center;font-weight: bold;">
meas2
</th>
<th style="text-align:center;font-weight: bold;">
meas3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
A13
</td>
<td style="text-align:center;">
34
</td>
<td style="text-align:center;">
sun
</td>
<td style="text-align:center;">
NA
</td>
</tr>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
87
</td>
<td style="text-align:center;">
sun
</td>
<td style="text-align:center;">
pm
</td>
</tr>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
65
</td>
<td style="text-align:center;">
moon
</td>
<td style="text-align:center;">
pm
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
33
</td>
<td style="text-align:center;">
moon
</td>
<td style="text-align:center;">
am
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
sun
</td>
<td style="text-align:center;">
am
</td>
</tr>
</tbody>
</table>
<li>
Data frame <code>T</code>
</li>
<table class=" lightable-classic table table-hover table-condensed table-striped" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;">
uniq
</th>
<th style="text-align:center;font-weight: bold;">
meas3
</th>
<th style="text-align:center;font-weight: bold;">
meas1
</th>
<th style="text-align:center;font-weight: bold;">
meas2
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
A14
</td>
<td style="text-align:center;">
am
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
NA
</td>
</tr>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
pm
</td>
<td style="text-align:center;">
87
</td>
<td style="text-align:center;">
sun
</td>
</tr>
<tr>
<td style="text-align:center;">
A15
</td>
<td style="text-align:center;">
pm
</td>
<td style="text-align:center;">
65
</td>
<td style="text-align:center;">
moon
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
am
</td>
<td style="text-align:center;">
33
</td>
<td style="text-align:center;">
moon
</td>
</tr>
<tr>
<td style="text-align:center;">
A16
</td>
<td style="text-align:center;">
am
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
sun
</td>
</tr>
<tr>
<td style="text-align:center;">
A17
</td>
<td style="text-align:center;">
pm
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
NA
</td>
</tr>
</tbody>
</table>
</ol>
<p> </p>
</div>
<div id="join-identification-ii" class="section level2">
<h2>Join Identification II</h2>
<ol>
<li>Create data frames in R that match the <code>A</code> and <code>B</code> data frames from the “Join Identification I” question.</li>
<li>Use join commands in R to create each of the <code>Z</code>, <code>Y</code>, <code>W</code>, <code>V</code>, <code>U</code>, and <code>T</code> data frames in the “Join Identification I” questions from the <code>A</code> and <code>B</code> data frames. Show your code and the complete resulting data frame.</li>
<li>Reflect on your answers in “Join Identification I” and in the previous question. Were each of your answers correct? Which ones (if any) were not correct and where do you think your reasoning went awry?</li>
</ol>
<p> </p>
</div>
<div id="ski-club" class="section level2">
<h2>Ski Club</h2>
<p>A group of 16 competitive but amateur skiers formed a loosely-knit “club” to motivate themselves to keep skiing. The record keeper for the club developed a data organization that has four sheets in <a href="https://github.com/droglenc/NCWrangling/raw/main/resources/data/Skiers.xlsx">this Excel file</a>. The “skiers” sheet has information about each skier including a unique <code>bibID</code> code. The “races” sheet has information about each ski race that members of the club partake in and includes a unique “raceID” code. To date, two races have been entered into the spreadsheet. The “race19” results has results from the first race (i.e., <code>raceID</code>==1) for each of the members that participated in that race. The “race20” sheet is the samee for the second race (i.e., <code>raceID</code>==2). You should download the Excel file and load each sheet into a separate dataframe in R. Use these data frames to perform the following tasks. Show your R code and the resulting data frame.</p>
<ol>
<li><p>Show results from both races for racers that were in both races.</p></li>
<li><p>Appended the racers’ personal information to the data frame from the previous question. As a matter of aesthetics do this in a manner such that the personal information is left most in the resulting data frame. [<em>Note that there should be no missing values in this data frame.</em>]</p></li>
<li><p>Note that some of the variables in the data frame from the previous question have suffixes appended to the name. Explain why you think this happened and why it is needed.</p></li>
<li><p>Show results for the first race <em>only</em> for racers that were in both races.</p></li>
<li><p>Show results for the first race <em>only</em> for racers that were <em>only</em> in the first race.</p></li>
<li><p>Show “results” for both races for all racers that were in the first race.</p></li>
<li><p>Construct a “master race file” that has results for all racers for all races.</p></li>
</ol>
<p> </p>
</div>
<div id="food-insecurity-surveys" class="section level2">
<h2>Food Insecurity Surveys</h2>
<p>Ashland County administrators want to assess factors that lead to food insecurity among residents of Ashland County. Towards this end they will distribute a food insecurity survey to as many households in the county as possible. As it is not know who is food insecure they have decided to either place the surveys at locations where those that are food insecure at likely to frequent. In addition, they will hand out some surveys directly to people at these locations.</p>
<p>To monitor the return rate of the surveys the administrators have uniquely numbered each of 1000 surveys and will keep track of where, when, and how each survey was delivered. This information is recorded in the “Surveys” sheet of <a href="https://github.com/droglenc/NCWrangling/raw/main/resources/data/FoodInsecuritySurvey.xlsx">FoodInsecuritySurvey.xlsx</a>. Information, including the unique survey number, on the returned surveys was entered separately in the “Results” sheet of the same Excel workbook. Meta data for the two sheets is in the “meta” sheet of the same workbook. Load these data frames into R.</p>
<p>Two of an inner, left, right, or full join can be used to create a new data frame that has all variables from both data frames present but only for surveys that have been returned.</p>
<ol>
<li>Show how to use both of these joins to create this new data frame. Comment on which method is preferred (if either) and why.</li>
<li>Explain why the other two joins are not appropriate for this task.</li>
</ol>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
